# Android插件化框架对比

|                           框架名称                           |  出现时间  |       作者       |                           实现简介                           |                             优点                             |                             缺点                             |
| :----------------------------------------------------------: | :--------: | :--------------: | :----------------------------------------------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: |
| [AndroidDynamicLoader](https://github.com/mmin18/AndroidDynamicLoader) | 2012年07月 |  大众点评屠毅敏  |   不使用Activity，动态加载插件中的 Fragment 实现页面的切换   |                                                              | 1、使用资源时要用`MyResources.getResource(Me.class)`而不是`context.getResources()`。2、需要使用URL mapping才能实现页面跳转。 |
| [DynamicLoadApk](https://github.com/singwhatiwanna/dynamic-load-apk) |  2014年底  | 百度工程师任玉刚 |                 通过代理Activity来实现插件化                 | 1、无需安装即可由宿主调起。2、支持用R访问plugin资源。3、支持Activity和FragmentActivity。4、基本无反射调用。5、插件安装后仍可独立运行从而便于调试。 | 1、需要使用『that』而不是『this』，所有activity都需要继承自proxy avtivity（proxy avtivity负责管理所有activity的生命周期）。2、无法启动apk内部的activity。3、不支持Service和BroadcastReceiver。 |
| [android-pluginmgr](https://github.com/houkx/android-pluginmgr) | 2015年04月 |      houkx       |                 动态创建Activity来实现插件化                 |                                                              | 1、未经过生产环境App测试。2、不支持Service和BroadcastReceiver。 |
|          [ACCD](https://github.com/woyaowenzi/ACDD)          | 2015年04月 |  阿里bunnyblue   | 非代理Android动态热部署框架，OpenAtlas 之后改为ACDD 携程开源框架参考了这个 |                                                              |                                                              |
|    [DroidPlugin](https://github.com/Qihoo360/DroidPlugin)    | 2015年08月 |     奇虎360      |                         深度hook实现                         | 1、**无需**重新编译、无需知道其源码。2、支持四大组件。3、API低侵入性：极少的API。4、代码、资源完全隔离。 | 1、不支持自定义推送栏。2、无法在插件中注册一些具有特殊Intent Filter的`Service`、`Activity`、`BroadcastReceiver`、`ContentProvider`等组件。3、缺乏对Native层的Hook，对某些带native代码的apk支持不好，可能无法运行。比如一部分游戏无法当作插件运行。 |
|   [DynamicAPK](https://github.com/CtripMobile/DynamicAPK)    |  2015年底  |       携程       |                     扩展aapt解决资源问题                     | 1、无需做任何activity/fragment/resource的proxy实现。2、并发开发。3、提升编译速度。4、提升启动速度(可以在App启动时仅加载必须的模块，其他模块按需加载)。5、Hot fix(包含代码和资源)。6、按需下载和加载任意功能模块(包含代码和资源) |                                                              |
|          [Small](https://github.com/wequick/Small)           |  2015年底  |      林光亮      | 比DroidPlugin轻量一点，用脚本来解决资源问题，适用于将一个APK拆分为多个公共库插件、业务模块插件的场景。 | 1、所有插件支持内置宿主包中。2、插件的编码和资源文件的使用与普通开发应用没有差别。3、通过设定 URI ，宿主以及 Native 应用插件，Web 插件，在线网页等能够方便进行通信。4、支持 Android 、 iOS 、和 Html5 ，三者可以通过同一套 Javascript 接口实现通信。 |                   1、不支持Service插件化。                   |
|       [VirtualAPK](https://github.com/didi/VirtualAPK)       | 2017年06月 |       滴滴       |    apk被宿主加载后，在宿主中创建单独的 LoadedPlugin 对象     | 1、支持四大组件。2、无需手动注册组件。3、支持访问宿主应用程序类和资源。4、支持Pending Intent。 |                                                              |
|       [RePlugin](https://github.com/Qihoo360/RePlugin)       | 2017年07月 |   360手机卫士    |                       占坑类插件化方案                       | 1、支持大部分特性。2、稳定，崩溃率低至万分之一。3、充分利用原生特性。 |                 1、组件需要在Manifest占坑。                  |
|         [Shadow](https://github.com/Tencent/Shadow)          |   2019年   |       腾讯       |                 零反射全动态Android插件框架                  | 1、零反射。2、框架自身动态化。3、宿主增量极小。4、Kotlin实现。5、支持四大组件、Fragment、databinding、跨进程使用插件Service、自定义Theme、插件访问宿主类、So加载、分段加载插件（多Apk分别加载或多Apk以此依赖加载）、一个Activity中加载多个Apk中的View...... |                                                              |



# Android插件化框架支持特性对比

|                特性                | Android Dynamic Loader | Dynamic Load Apk | android-pluginmgr |         ACDD         |  Droid Plugin   |  Dynamic APK   |     Small      |  Virtual APK  |   RePlugin   |      Shadow      |
| :--------------------------------: | :--------------------: | :--------------: | :---------------: | :------------------: | :-------------: | :------------: | :------------: | :-----------: | :----------: | :--------------: |
|          **支持四大组件**          |         不支持         |  只支持Activity  |  只支持Activity   |        全支持        |     全支持      | 只支持Activity | 只支持Activity |    全支持     |    全支持    |    **全支持**    |
| **组件无需在宿主manifest中预注册** |           ✓            |        ✓         |         ×         |          ×           |        ✓        |       ×        |       ✓        |       ✓       |      ✓       |      **✓**       |
|        **插件可以依赖宿主**        |           ×            |        ✓         |      未明确       |          ✓           |        ×        |       ✓        |       ✓        |       ✓       |   轻度依赖   |      **✓**       |
|           **支持So加载**           |           ×            |        ×         |         ×         |          ×           |        ×        |       ×        |       ✓        |       ✓       |      ✓       |      **✓**       |
|        **支持DataBinding**         |           ×            |        ×         |         ×         |          ×           |     未明确      |       ×        |       ×        |       ✓       |      ✓       |      **✓**       |
|         **支持AppCompat**          |           ×            |        ×         |         ×         |          ×           |        ×        |       ×        |       ✓        |       ✓       |      ✓       |      **✓**       |
|           **支持Kotlin**           |           ×            |        ×         |         ×         |          ×           |        ×        |       ×        |       ×        |       ×       |      ×       |      **✓**       |
|       **支持Pending Intent**       |         未明确         |        ×         |      未明确       |        未明确        |        ✓        |       ×        |       ×        |       ✓       |      ✓       |      **✓**       |
|        **用R访问插件资源**         |           ×            |        ✓         |      未明确       |        未明确        |    几乎全部     |       ✓        |       ✓        |       ✓       |      ×       |      **×**       |
|         **App多apk插件化**         |         未明确         |      未明确      |      未明确       |        未明确        |     未明确      |       ✓        |       ✓        |       ✓       |    未明确    |      **✓**       |
|        **Android特性支持**         |         未明确         |      大部分      |      大部分       |        未明确        |    几乎全部     |     大部分     |     大部分     |   几乎全部    |   几乎全部   |   **几乎全部**   |
|           **兼容性适配**           |         未明确         |       一般       |      未明确       |        未明确        |       高        |      一般      |      中等      |      高       |      高      |      **高**      |
|            **插件构建**            |         未明确         |        无        |        无         |       部署aapt       |       无        |    部署aapt    |   Gradle插件   |  Gradle插件   |  Gradle插件  |      **无**      |
|            **框架轻重**            |          轻量          |     相对轻量     |       轻量        |         重量         |    相对轻量     |    相对轻量    |    极其轻量    |   相对轻量    |   相对轻量   |   **非常轻量**   |
|          **支持安卓版本**          |    Android 3.0 以上    | Android 2.x 以上 | Android 2.x 以上  |        未明确        | Androd 2.3 以上 |     未明确     |  API Level 9+  | API Level 15+ | API Level 9+ |    **未明确**    |
|            **接入难度**            |           中           |        中        |        易         |          难          |       易        |       中       |       难       |      中       |      易      |      **中**      |
|            **侧重阶段**            |         运行期         |      运行期      |      运行期       |        编译期        |     运行期      |     运行期     |     运行期     |    运行期     |    运行期    |    **运行期**    |
|           **热修复能力**           |           ×            |        ×         |         ×         |          ✓           |        ×        |       ✓        |       ×        |       ×       |      ×       |      **×**       |
|            **支持混淆**            |                        |                  |                   |                      |        ✓        |                |       ✓        |       ✓       |      ✓       |      **✓**       |
|       **插件安装后可否删除**       |         未明确         |      未明确      |      未明确       |         可以         |      可以       |     未明确     |     未明确     |     不能      |     不能     |    **未明确**    |
|          **插件更新方式**          |         未明确         |      未明确      |      未明确       | 插件及宿主须同时更新 |  插件独立更新   |     未明确     |  插件独立更新  | 插件独立更新  | 插件独立更新 | **插件独立更新** |

